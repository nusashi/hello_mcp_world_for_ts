# Model Context Protocol (MCP) 入門ガイド

## MCPとは何か

Model Context Protocol（MCP）は、大規模言語モデル（LLM）アプリケーションにコンテキスト情報を提供するための標準化されたプロトコルです。このプロトコルにより、LLMはより豊富な情報源にアクセスし、より適切で具体的な応答を生成できるようになります。

### 主要な特徴

- **標準化された通信方法**: クライアントとサーバー間の通信を統一
- **リソースベースのアーキテクチャ**: データをリソースとして構造化
- **ツール統合**: 外部機能をLLMから利用可能に
- **複数のトランスポート方式**: stdio、HTTP、WebSocketなどをサポート

## なぜMCPが重要なのか

従来のLLMアプリケーションでは、モデルに提供できる情報は制限されていました。MCPは以下の問題を解決します：

1. **コンテキスト窓の制限**: LLMに大量のデータを効率的に提供
2. **データ更新**: 最新情報へのアクセスを可能に
3. **機能拡張**: 外部ツールやAPIとの統合
4. **標準化**: 異なるLLMプラットフォーム間での互換性

## MCPの基本構成要素

### 1. サーバー

MCPサーバーは以下を提供します：
- **リソース**: データを表現するオブジェクト（ドキュメント、画像など）
- **ツール**: サーバーが実行できる機能（計算、検索など）

### 2. クライアント

MCPクライアントは以下を行います：
- サーバーへの接続と初期化
- リソースの読み込み要求
- ツールの呼び出し
- レスポンス処理

### 3. トランスポート層

MCPはさまざまな通信方式をサポートします：
- **Stdio**: コマンドライン間の通信
- **HTTP/SSE**: Webベースの通信
- **WebSocket**: 双方向リアルタイム通信

## 通信の流れ

1. **初期化**: クライアントとサーバーが接続し、機能を交換
2. **リソース探索**: クライアントが利用可能なリソースを検索
3. **リソース読み込み**: クライアントがリソースを要求し、サーバーが応答
4. **ツール呼び出し**: クライアントがツールの実行を要求し、サーバーが実行して結果を返す

## MCPのユースケース

- **データ検索・アクセス**: データベースやファイルシステムへのアクセス
- **APIインテグレーション**: 外部サービスとの連携
- **リアルタイム情報**: 最新情報の取得と提供
- **インタラクティブツール**: ユーザー入力に基づく動的処理

## MCPの技術的詳細

### JSON-RPC

MCPはJSON-RPCプロトコルを使用して通信します。基本的なメッセージ形式には以下のものがあります：

- **リクエスト**: クライアントからサーバーへの要求
  ```json
  {
    "jsonrpc": "2.0",
    "method": "resources/read",
    "params": { "uri": "example://resource" },
    "id": 1
  }
  ```

- **レスポンス**: サーバーからクライアントへの応答
  ```json
  {
    "jsonrpc": "2.0",
    "result": {
      "contents": [
        {
          "uri": "example://resource",
          "mimeType": "text/plain",
          "text": "Resource content"
        }
      ]
    },
    "id": 1
  }
  ```

- **エラー**: エラー発生時の応答
  ```json
  {
    "jsonrpc": "2.0",
    "error": {
      "code": -32601,
      "message": "Method not found"
    },
    "id": 1
  }
  ```

### リソース

リソースは一意のURIで識別され、次のような形式でクライアントに返されます：

```json
{
  "contents": [
    {
      "uri": "example://resource",
      "mimeType": "text/plain",
      "text": "Resource content"
    }
  ]
}
```

コンテンツはテキストだけでなく、バイナリデータ（Base64エンコード）やJSON構造化データなど、さまざまな形式をサポートします。

### ツール

ツールは名前と引数スキーマで定義され、次のような形式で呼び出されます：

```json
{
  "name": "calculate",
  "arguments": {
    "operation": "add",
    "a": 5,
    "b": 3
  }
}
```

ツールの応答は一般に次のようになります：

```json
{
  "content": [
    {
      "type": "text",
      "text": "計算結果: 8"
    }
  ]
}
```

## このプロジェクトで学ぶこと

`hello_world`プロジェクトでは、以下を学びます：

1. MCPサーバーの基本構築
2. リソース管理の実装
3. ツール機能の提供
4. クライアント側の実装
5. 異なるトランスポート方式（stdio、HTTP）の使用

## 技術的前提知識

このプロジェクトを理解するには、以下の知識が役立ちます：

- **Node.js**: JavaScriptランタイム環境
- **TypeScript**: 型付きJavaScript
- **非同期プログラミング**: Promise、async/await
- **クライアント・サーバーアーキテクチャ**: 基本的な通信モデル
- **JSON**: データ形式とその処理

## 参考リソース

- [MCP SDK ドキュメント](https://github.com/anthropics/MODEL_CONTEXT_PROTOCOL_SDK)
- [JSON-RPC 2.0仕様](https://www.jsonrpc.org/specification)
